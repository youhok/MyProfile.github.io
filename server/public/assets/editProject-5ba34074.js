import{d as N,D as j,r as h,e as q,E as I,o as m,c as u,a as e,g as a,w as n,F as y,m as U,f as g,O as V,P as B,s as S,H as L,p as E,j as P,_ as O}from"./index-9f45cced.js";import{h as M}from"./moment-a9aaa855.js";import{p as k}from"./projectController-f45fd419.js";import{C as T}from"./categoriesController-64e076d1.js";import{C as _,c as F}from"./compressor-b1d296c0.js";const d=p=>(E("data-v-86ab03df"),p=p(),P(),p),Y={class:"container-fluid"},$=d(()=>e("div",{class:"row"},[e("div",{class:"col-12"},[e("div",{class:"d-flex justify-content-between"},[e("h3",null,"Update Project")])])],-1)),A={class:"row wrapper"},H={class:"col-12"},R=d(()=>e("p",null,"Demo Link",-1)),K={class:"modal-content rounded-3 shadow-sm mt-3 bg-body-tertiary"},z={class:"modal-body p-4"},W={class:"container-fluid"},G={class:"col-lg-5 col-sm-12"},J={class:"col-lg-5 col-sm-12"},Q={class:"col-lg-2 col-sm-12"},X=["onClick"],Z=d(()=>e("i",{class:"bi bi-node-plus"},null,-1)),ee=d(()=>e("i",{class:"bi bi-node-plus"},null,-1)),se={class:"d-flex gap-3 mt-2"},ae={class:"toggle-switch"},te=d(()=>e("label",{class:"toggle-label",for:"toggle"},null,-1)),le=d(()=>e("div",{class:"Download"}," Downloadable ",-1)),oe=d(()=>e("h5",null,"Platforms*",-1)),ie={class:"modal-content rounded-3 shadow-sm mt-3 bg-body-tertiary"},re={class:"modal-body p-4"},ne={class:"container-fluid"},ce={class:"row"},de={class:"col-4"},pe={class:"col-4"},me={class:"col-4"},ue={class:"modal-content rounded-3 shadow-sm mt-3 bg-body-tertiary"},_e={class:"modal-body p-4"},he={class:"container-fluid"},be={class:"row"},fe={class:"col-4"},ve={class:"col-4"},we={class:"col-4"},ye={class:"modal-content rounded-2 shadow-sm mt-3 bg-body-tertiary"},ge={class:"modal-body p-4"},ke={class:"container-fluid"},Fe={class:"row"},De={class:"col-4"},Ce={class:"col-4"},xe={class:"col-4"},Ne={class:"modal-content rounded-2 shadow-sm mt-3 bg-body-tertiary"},je={class:"modal-body p-4"},qe={class:"container-fluid"},Ie={class:"row"},Ue={class:"col-4"},Ve={class:"col-4"},Be={class:"col-4"},Se={class:"modal-content rounded-3 shadow-sm mt-3 mb-3 bg-body-tertiary"},Le={class:"modal-body p-4"},Ee={class:"container-fluid"},Pe={class:"row"},Oe={class:"col-4"},Me={class:"col-4"},Te={class:"col-4"},Ye={class:"container-fluid"},$e={class:"row"},Ae={class:"col-12"},He=N({__name:"editProject",setup(p){const D=j(),b=h([]),f=h(!1),v=D.params.id.toString();q(async()=>{const o=await T.getAll();b.value=o.map(t=>({label:`${t.enName} - ${t.khName} - ${t.type}`,value:t._id}));const l=await k.getOne(v);if(l.thumbnail&&l.thumbnail.name&&l.thumbnail.url){const t=await _.fromUrl(l.thumbnail.url,l.thumbnail.name),i={name:l.thumbnail.name,file:t};l.thumbnailFile=[i]}l.screenshotFiles=[];for(let t=0;t<l.screenshots.length;t++){const i=l.screenshots[t];if(i&&i.url&&i.name){const c=await _.fromUrl(i.url,i.name);l.screenshotFiles.push({name:i.name,file:c})}}const s=M(l.releaseDate).utc().format("YYYY-MM-DDTHH:mm");l.releaseDate=s,r.value=l});const r=h({categoryId:"",categoryDoc:{khName:"",enName:"",status:"",type:"",_id:""},name:"",thumbnail:{},description:"",features:[],screenshots:[],demoLinks:[],requirements:[],releaseDate:"",note:"",downloadable:!1,status:"Completed"}),C=()=>{var o;(o=r.value.demoLinks)==null||o.push({name:"",link:""})},x=async o=>{console.log(r);try{if(o.thumbnailFile&&o.thumbnailFile.length>0&&o.thumbnailFile[0].file){const s=o.thumbnailFile[0].file;console.log("O File",s);let t=s;s.size>1e6&&(t=await F(s,.6)),console.log("ðŸš€ ~ submit ~ thumnailBob:",t);const i=await _.toBase64(t);o.thumbnail.name=o.thumbnailFile[0].name,o.thumbnail.base64=i}if(o.screenshotFiles&&o.screenshotFiles.length>0)for(let s=0;s<o.screenshotFiles.length;s++){const t=o.screenshotFiles[s];if(t){const i=await F(t.file);console.log(i);const c=await _.toBase64(i);console.log(c),o.screenshots.push({name:t.name,base64:c})}}const l=await k.update(v,o);L.success(l.message),f.value=!0}catch(l){console.error("Error submitting form:",l)}};return(o,l)=>{const s=I("FormKit");return m(),u("div",null,[e("div",Y,[$,e("div",A,[e("div",H,[a(s,{"form-class":f.value?"hide":"show",id:"licenseForm",type:"form",modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=t=>r.value=t),onSubmit:x},{default:n(()=>[a(s,{type:"file",name:"thumbnailFile",label:"Thumnail*",accept:".jpg,.png,.pdf","wrapper-class":{"formkit-wrapper":!1},validation:"required"}),a(s,{type:"select",label:"Category*","wrapper-class":{"formkit-wrapper":!1},name:"categoryId",placeholder:"Select options",options:b.value},null,8,["options"]),a(s,{type:"text",name:"name",label:"Name*","wrapper-class":{"formkit-wrapper":!1},placeholder:"Enter your project name",validation:"required"}),a(s,{type:"textarea",name:"description","wrapper-class":{"formkit-wrapper":!1},label:"Description*",placeholder:"Enter your description",validation:"required"}),a(s,{type:"textarea",name:"features",label:"Features*","wrapper-class":{"formkit-wrapper":!1},placeholder:"Enter your features",validation:"required"}),a(s,{type:"file",name:"screenshotFiles",label:"Screenshots*",accept:".jpg,.png,.pdf","wrapper-class":{"formkit-wrapper":!1},multiple:"true",validation:"required"}),R,e("div",K,[e("div",z,[e("div",W,[a(s,{type:"list",modelValue:r.value.demoLinks,"onUpdate:modelValue":l[0]||(l[0]=t=>r.value.demoLinks=t),dynamic:""},{default:n(({items:t})=>[(m(!0),u(y,null,U(t,(i,c)=>(m(),u("div",{key:i,class:"row"},[a(s,{type:"group",index:c},{default:n(()=>[e("div",G,[a(s,{type:"text",name:"name","wrapper-class":{"formkit-wrapper":!1},label:"Name*"})]),e("div",J,[a(s,{type:"url",name:"link","wrapper-class":{"formkit-wrapper":!1},label:"Url*",validation:"required|url"})]),e("div",Q,[e("button",{class:"card-Delete__button bg-danger",onClick:Re=>{var w;return(w=r.value.demoLinks)==null?void 0:w.splice(c,1)}},[Z,g(" Delete ")],8,X)])]),_:2},1032,["index"])]))),128)),e("button",{type:"button",onClick:C,class:"card-form__button"},[ee,g(" Add ")])]),_:1},8,["modelValue"])])])]),e("div",se,[e("div",ae,[V(e("input",{class:"toggle-input",id:"toggle",type:"checkbox","onUpdate:modelValue":l[1]||(l[1]=t=>r.value.downloadable=t)},null,512),[[B,r.value.downloadable]]),te]),le]),r.value.downloadable?(m(),u(y,{key:0},[oe,a(s,{type:"list",name:"platforms"},{default:n(()=>[e("div",ie,[e("div",re,[e("div",ne,[e("div",ce,[a(s,{type:"group"},{default:n(()=>[e("div",de,[a(s,{label:"Icon*",name:"icon",value:"ti ti-brand-windows","wrapper-class":{"formkit-wrapper":!1},disabled:""})]),e("div",pe,[a(s,{label:"Name*",name:"name",value:"Windows","wrapper-class":{"formkit-wrapper":!1},disabled:""})]),e("div",me,[a(s,{type:"url",name:"url",label:"Url*","wrapper-class":{"formkit-wrapper":!1}})])]),_:1})])])])]),e("div",ue,[e("div",_e,[e("div",he,[e("div",be,[a(s,{type:"group"},{default:n(()=>[e("div",fe,[a(s,{label:"Icon*",name:"icon",value:"ti ti-brand-finder","wrapper-class":{"formkit-wrapper":!1},disabled:""})]),e("div",ve,[a(s,{label:"Name*",name:"name",value:"Mac","wrapper-class":{"formkit-wrapper":!1},disabled:""})]),e("div",we,[a(s,{type:"url",name:"url",label:"Url*","wrapper-class":{"formkit-wrapper":!1}})])]),_:1})])])])]),e("div",ye,[e("div",ge,[e("div",ke,[e("div",Fe,[a(s,{type:"group"},{default:n(()=>[e("div",De,[a(s,{label:"Icon*",name:"icon",value:"ti ti-brand-ubuntu","wrapper-class":{"formkit-wrapper":!1},disabled:""})]),e("div",Ce,[a(s,{label:"Name*",name:"name",value:"Linux","wrapper-class":{"formkit-wrapper":!1},disabled:""})]),e("div",xe,[a(s,{type:"url",name:"url",label:"Url*","wrapper-class":{"formkit-wrapper":!1}})])]),_:1})])])])]),e("div",Ne,[e("div",je,[e("div",qe,[e("div",Ie,[a(s,{type:"group"},{default:n(()=>[e("div",Ue,[a(s,{label:"Icon*",name:"icon",value:"ti ti-brand-apple","wrapper-class":{"formkit-wrapper":!1},disabled:""})]),e("div",Ve,[a(s,{label:"Name*",name:"name",value:"IOS","wrapper-class":{"formkit-wrapper":!1},disabled:""})]),e("div",Be,[a(s,{type:"url",name:"url",label:"Url*","wrapper-class":{"formkit-wrapper":!1}})])]),_:1})])])])]),e("div",Se,[e("div",Le,[e("div",Ee,[e("div",Pe,[a(s,{type:"group"},{default:n(()=>[e("div",Oe,[a(s,{label:"Icon*",name:"icon",value:"ti ti-brand-android","wrapper-class":{"formkit-wrapper":!1},disabled:""})]),e("div",Me,[a(s,{label:"Name*",name:"name",value:"Android","wrapper-class":{"formkit-wrapper":!1},disabled:""})]),e("div",Te,[a(s,{type:"url",name:"url",label:"Url*","wrapper-class":{"formkit-wrapper":!1}})])]),_:1})])])])])]),_:1}),e("div",Ye,[e("div",$e,[e("div",Ae,[a(s,{label:"Requirements",name:"requirements","wrapper-class":{"formkit-wrapper":!1}})])])])],64)):S("",!0),a(s,{type:"datetime-local",name:"releaseDate","wrapper-class":{"formkit-wrapper":!1},label:"Release Date*",validation:"required"}),a(s,{type:"textarea",name:"note","wrapper-class":{"formkit-wrapper":!1},label:"Note",placeholder:"Enter your note",validation:"required"}),a(s,{type:"select",label:"Status*","wrapper-class":{"formkit-wrapper":!1},name:"status",options:["Completed","Development","Coming Soon"],validation:"required"})]),_:1},8,["form-class","modelValue"])])])])])}}});const Qe=O(He,[["__scopeId","data-v-86ab03df"]]);export{Qe as default};
